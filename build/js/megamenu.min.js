"use strict";$.fn.megaMenu=function(e){var a={caret:!1,textHighlighter:!1,caretArrows:[{up:"caret-up",down:"caret-down"}]},n=$.extend({menuBehaviour:"click",stickyHeader:!0,selector:$(this),caret:"",caretArrows:[{up:"",down:"",upUrl:"",downUrl:""}],highlighter:!0,followingHighlighter:!1,highlightColor:"",textHighlighterColor:"",animation:!1,animationClass:""},a,e),r=(n.selector,$(".main-links ul li a")),l=$(".menu-dropdown .menu-item-wrapper"),t=[],o=[],h=($("#"+l.attr("id")),a.caretArrows[0].up),d=a.caretArrows[0].down;if(!1===n.stickyHeader?$(".mega-menu").removeClass("sticky-header"):$(".mega-menu").addClass("sticky-header"),!0===n.caret)h=n.caretArrows[0].up,d=n.caretArrows[0].down;(n.caretArrows[0].up||n.caretArrows[0].down)&&(n.caretArrows[0].upUrl=null,n.caretArrows[0].downUrl=null),$("a[data-submenu]").append('<span class="caret '+d+'"></span>'),!0===n.caret&&""!==n.caretArrows[0].downUrl&&($(".mega-menu span.caret").removeClass("undefined"),$(".mega-menu span.caret").addClass("caret-img down"),$(".mega-menu span.caret.caret-img.down").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),$("<style>\n      .mega-menu .main-links ul li a:hover{\n        border-color:"+n.highlightColor+"}\n    </style>").appendTo("head"),r.on(n.menuBehaviour,function(){r.removeClass("highlight"),r.css({"border-color":""})}),""===n.menuBehaviour&&(n.menuBehaviour="click"),r.each(function(s){var i=$(this).attr("data-submenu");t.push($(this).attr("data-submenu")),$(this).on(n.menuBehaviour,function(){var e=jQuery.inArray(i,o),a=$(this).find(".caret.caret-img");r.find("span").removeClass(h),r.find("span").addClass(d),t[s]!=o[e]||$(l[e]).hasClass("active")?($(l[e]).removeClass("active"),$(this).find("span").removeClass(h),$(this).find("span").addClass(d)):(l.removeClass("active"),$(l[e]).addClass("active"),$(this).find("span").removeClass(d),$(this).find("span").addClass(h)),$(".menu-dropdown").find(".menu-item-wrapper").hasClass("active")&&($(".mega-menu span.caret").addClass("down"),$(".mega-menu span.caret").css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),a.hasClass("down")?(a.removeClass("down"),a.addClass("up"),a.css({"background-image":"url("+n.caretArrows[0].upUrl+")"})):(a.removeClass("up"),a.addClass("down"),a.css({"background-image":"url("+n.caretArrows[0].downUrl+")"})),(r.find("span").hasClass("caret-up")||$(this).find("span").hasClass("up")&&!$(this).hasClass("highlight"))&&($(this).addClass("highlight"),$(this).css({"border-color":n.highlightColor}))})}),!0===n.followingHighlighter&&($(".main-links ul").append('<div class="follow-highlighter"></div>'),r.mouseover(function(e,a){e.pageX,$(this).offset().left,$(this).innerWidth();$(".follow-highlighter").css({display:"block"}),$(".main-links ul").addClass("follow-highlighter-enabled"),$(".follow-highlighter").css({width:$(this).innerWidth(),left:$(this).offset().left,"background-color":n.highlightColor})})),$(".main-links ul").each(function(){$(this).mouseleave(function(){$(".main-links ul").removeClass("follow-highlighter-enabled"),$(".follow-highlighter").css({display:"none",left:$(r[0]).offset().left})})}),!1===n.highlighter&&($(".main-links").addClass("disable-highlighter"),$(".follow-highlighter").remove()),!0===n.textHighlighter&&$(".main-links").addClass("text-highlighter"),n.textHighlighterColor&&$("style").append(".mega-menu .text-highlighter.main-links ul li a:hover{\n      color:"+n.textHighlighterColor+"}"),l.each(function(e){o.push($(l[e]).attr("id"))}),!0===n.animation&&l.addClass(n.animationClass),$(".mobile-nav-icon a").click(function(){$(".follow-highlighter").remove(),$(".main-links").hasClass("active")?($(".main-links").removeClass("active"),$(".menu-dropdown").hide()):($(".main-links").addClass("active"),$(".menu-dropdown").show())}),$(".menu-item-wrapper").prepend('<a href="#" class="back-link">Back</a>'),$(window).resize(function(){$(window).width()<768?$(".mega-menu").hasClass("sticky-header")&&($(".mega-menu").addClass("responsive-menu"),$(".main-links").css({"margin-top":$(".mobile-nav-icon").outerHeight()+"px"})):$(".main-links").css({"margin-top":"0px"})}),$(document).ready(function(){$(".back-link").on("click",function(){r.trigger("click"),$(r[r.length-1]).trigger("click")})})};